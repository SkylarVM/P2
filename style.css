/* ============================================================
   Penguin Companion â€” XP Planner  (v3.2)
   Base styling: tech-lab dark theme with soft 3D accents
   ============================================================ */

:root {
  --bg: #0b1220;
  --bg-card: #111b2e;
  --bg-overlay: rgba(5,10,20,0.8);
  --text: #f2f4f8;
  --muted: #9da7bd;
  --accent: #4c8bf5;
  --accent-light: #6ca2ff;
  --accent-dark: #3a6ee8;
  --success: #29b45a;
  --danger: #e15252;
  --shadow: rgba(0,0,0,0.4);
  --radius: 14px;
  --gap: 0.75rem;
  --font: 'Inter', sans-serif;
}

*,
*::before,
*::after { box-sizing: border-box; }

body {
  margin: 0;
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  line-height: 1.4;
  overflow-x: hidden;
}

/* ------------------------------------------------------------
   Layout
------------------------------------------------------------ */
#appHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  padding: 0.75rem 1rem;
  background: var(--bg-card);
  box-shadow: 0 2px 10px var(--shadow);
  position: sticky;
  top: 0;
  z-index: 50;
}

.brand {
  display: flex;
  align-items: center;
  gap: .5rem;
}

.brand h1 {
  font-size: 1.25rem;
  font-weight: 700;
}

.level-strip {
  flex: 1;
  min-width: 220px;
  margin: 0 .75rem;
}

.level-line {
  font-size: .9rem;
  display: flex;
  gap: .25rem;
  justify-content: center;
}

.progress {
  height: 6px;
  background: #1a243a;
  border-radius: 6px;
  overflow: hidden;
  margin-top: 4px;
}
.progress-bar {
  height: 100%;
  background: linear-gradient(90deg,var(--accent),var(--accent-light));
  border-radius: 6px;
  transition: width .3s;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: .4rem;
}

main#grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
  gap: 1rem;
  padding: 1rem;
}

/* ------------------------------------------------------------
   Cards
------------------------------------------------------------ */
.card {
  background: var(--bg-card);
  border-radius: var(--radius);
  box-shadow: 0 4px 10px var(--shadow);
  padding: 1rem;
  display: flex;
  flex-direction: column;
  min-height: 200px;
}
.card.wide { grid-column: span 2; }

.card-title {
  font-weight: 700;
  margin-bottom: .5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* ------------------------------------------------------------
   Buttons
------------------------------------------------------------ */
button,
.btn {
  font-family: var(--font);
  cursor: pointer;
  border: none;
  border-radius: 10px;
  padding: .45rem .9rem;
  font-weight: 600;
  transition: transform .1s, box-shadow .1s;
  box-shadow: 0 3px 0 rgba(0,0,0,.2);
}
button:hover { transform: translateY(-1px); }
button:active { transform: translateY(1px); }

.btn.primary { background: var(--accent); color: #fff; }
.btn.primary:hover { background: var(--accent-light); }
.btn.success { background: var(--success); color: #fff; }
.btn.danger { background: var(--danger); color: #fff; }
.btn.ghost { background: #18253d; color: var(--text); }
.btn.ghost:hover { background: #24345a; }

.btn.pulse {
  animation: pulse 2s infinite;
}
@keyframes pulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(76,139,245,0.4); }
  50% { box-shadow: 0 0 0 6px rgba(76,139,245,0); }
}

/* Small buttons inside cards */
.btn-row button { margin-left: .25rem; }

/* ------------------------------------------------------------
   Inputs / selects
------------------------------------------------------------ */
.input, select.select {
  background: #18253d;
  border: 1px solid #253555;
  color: var(--text);
  padding: .4rem .6rem;
  border-radius: 8px;
  font-family: var(--font);
  font-size: .9rem;
}
.input:focus, select:focus {
  outline: none;
  border-color: var(--accent);
}
.input-s { width: 70px; }
.select.wide { width: 100%; }

/* ------------------------------------------------------------
   Lists
------------------------------------------------------------ */
.list { list-style: none; padding: 0; margin: .5rem 0 0; display: flex; flex-direction: column; gap: .4rem; }
.item {
  background: #0f192d;
  border-radius: 10px;
  padding: .5rem .75rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: inset 0 0 8px rgba(255,255,255,0.05);
}
.item-actions { display: flex; gap: .25rem; }

/* ------------------------------------------------------------
   Stats
------------------------------------------------------------ */
.stat-line { margin-bottom: .5rem; }
.bar {
  background: #1b2640;
  border-radius: 10px;
  overflow: hidden;
  height: 10px;
  margin-top: 4px;
}
.bar .fill {
  background: var(--accent);
  height: 100%;
  width: 0;
  transition: width .3s;
}

/* ------------------------------------------------------------
   Shop
------------------------------------------------------------ */
.shop-columns { display: flex; flex-wrap: wrap; gap: 1rem; }
.shop-grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(120px,1fr)); gap: .6rem; }

.shop-card {
  background: #0f1a2f;
  border-radius: 12px;
  padding: .6rem;
  text-align: center;
  box-shadow: 0 3px 8px var(--shadow);
}
.shop-card .shop-icon {
  width: 60px;
  height: 60px;
  margin: 0 auto .4rem;
  background: radial-gradient(circle at 30% 30%, #8c7bff,#5a3df5);
  border-radius: 50%;
}
.shop-card .btn { margin-top: .3rem; width: 100%; }

/* ------------------------------------------------------------
   Overlay / Modal base
------------------------------------------------------------ */
.overlay,
.modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: var(--bg-overlay);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
}
.overlay.hidden, .modal.hidden { display: none; }

.overlay-inner,
.modal-inner {
  background: var(--bg-card);
  border-radius: var(--radius);
  box-shadow: 0 8px 20px var(--shadow);
  width: 90%;
  max-width: 900px;
  max-height: 90%;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
.modal-inner.wide { max-width: 1100px; }

.overlay-head, .modal-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: .6rem .9rem;
  border-bottom: 1px solid #223250;
  font-weight: 600;
}
.overlay-body, .modal-body {
  padding: 1rem;
  overflow-y: auto;
}
.big-timer {
  font-size: 4rem;
  text-align: center;
  margin: 1rem 0;
  color: var(--accent-light);
  text-shadow: 0 0 10px var(--accent-dark);
}

/* ------------------------------------------------------------
   Pomodoro / Call styling
------------------------------------------------------------ */
.ambient-controls {
  display: flex;
  align-items: center;
  gap: .5rem;
  margin-top: .5rem;
}
.switch {
  position: relative;
  display: inline-block;
  width: 38px;
  height: 20px;
}
.switch input { display:none; }
.slider {
  position: absolute; cursor: pointer;
  top: 0; left: 0;
  right: 0; bottom: 0;
  background-color: #444;
  border-radius: 20px;
  transition: .3s;
}
.slider:before {
  content: "";
  position: absolute;
  height: 16px; width: 16px;
  left: 2px; bottom: 2px;
  background: white;
  border-radius: 50%;
  transition: .3s;
}
.switch input:checked + .slider {
  background: var(--accent);
}
.switch input:checked + .slider:before {
  transform: translateX(18px);
}

/* ------------------------------------------------------------
   Race
------------------------------------------------------------ */
.race-body {
  display: flex;
  flex-wrap: wrap;
  gap: 2rem;
}
.race-col { flex: 1 1 300px; }
.race-code {
  background: #0f192d;
  padding: .4rem .6rem;
  border-radius: 8px;
  margin: .5rem 0;
}
.race-inner { max-width: 1000px; }
.race-grid {
  display: flex;
  gap: 1rem;
}
.race-side {
  width: 220px;
  border-right: 1px solid #223250;
  padding-right: 1rem;
}
.race-center { flex: 1; text-align: center; }
.minigame {
  margin-top: 1rem;
  background: #0f1a2f;
  border-radius: 10px;
  padding: .5rem;
}
.minigame.hidden { display: none; }

/* ------------------------------------------------------------
   Settings
------------------------------------------------------------ */
.settings {
  position: fixed;
  top: 0; right: 0;
  width: 380px;
  height: 100%;
  background: var(--bg-card);
  box-shadow: -4px 0 15px var(--shadow);
  transform: translateX(100%);
  transition: transform .3s;
  z-index: 300;
  display: flex;
  flex-direction: column;
}
.settings.show { transform: translateX(0); }
.settings-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: .8rem 1rem;
  border-bottom: 1px solid #223250;
  font-weight: 700;
}
.settings-body {
  padding: 1rem;
  overflow-y: auto;
}
.set-section { margin-bottom: 1.2rem; }
.mt { margin-top: .6rem; }
.check { display: flex; align-items: center; gap: .5rem; }
.danger-zone button { width: 100%; margin-top: .4rem; }

/* ------------------------------------------------------------
   Misc
------------------------------------------------------------ */
.hint { font-size: .8rem; color: var(--muted); margin-top: .4rem; }
.muted { color: var(--muted); }
.small { font-size: .85rem; }
.tiny { font-size: .75rem; }

.row { display: flex; align-items: center; }
.gap { gap: .5rem; }
.wrap { flex-wrap: wrap; }
.center { justify-content: center; }

.avatar-3d {
  width: 80px; height: 80px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #9a88ff,#5a3df5);
  box-shadow: inset 0 -3px 6px rgba(0,0,0,.4);
}
.avatar-row { display: flex; align-items: center; gap: .75rem; }

.swatch {
  width: 30px; height: 30px;
  border-radius: 50%;
  border: 2px solid #fff;
  cursor: pointer;
}
.swatch[data-color=blue]{background:#4c8bf5;}
.swatch[data-color=red]{background:#f55454;}
.swatch[data-color=green]{background:#33cc7a;}
.swatch[data-color=purple]{background:#8155ff;}
.swatch[data-color=gold]{background:#e7c156;}
.swatch.active { outline: 3px solid var(--accent-light); }

/* ------------------------------------------------------------
   Scrollbars
------------------------------------------------------------ */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-thumb { background: #223250; border-radius: 8px; }
::-webkit-scrollbar-thumb:hover { background: var(--accent-dark); }

/* ------------------------------------------------------------
   Mini call bubble
------------------------------------------------------------ */
.mini-bubble {
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  background: var(--bg-card);
  border-radius: 12px;
  box-shadow: 0 4px 12px var(--shadow);
  width: 240px;
}
.mini-head {
  display: flex; justify-content: space-between;
  align-items: center;
  background: #16223b;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  padding: .3rem .5rem;
  font-weight: 600;
}
.mini-body {
  padding: .6rem;
  text-align: center;
}
.mini-penguin {
  width: 50px; height: 50px;
  margin: 0 auto .3rem;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #9a88ff,#5a3df5);
}
.hidden { display: none !important; }

/* ------------------------------------------------------------
   Animations
------------------------------------------------------------ */
@keyframes floaty {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}
.avatar-3d, .mini-penguin, .shop-card .shop-icon {
  animation: floaty 3s ease-in-out infinite;
}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Penguin Companion â€” MVP</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Welcome / Onboarding (first run) -->
  <div id="onboard" class="modal shown" aria-hidden="false">
    <div class="modal-card">
      <div class="egg-hero"></div>
      <h2>Welcome to <span class="brand">Penguin Expedition</span> ğŸ§</h2>
      <p class="muted">Create your account to begin todayâ€™s study adventure.</p>

      <div class="stack">
        <input id="ob-username" class="input" placeholder="Username" autocomplete="username" />
        <input id="ob-password" class="input" type="password" placeholder="Password" autocomplete="new-password" />
        <button id="ob-continue" class="btn primary">Start Expedition</button>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="appbar">
    <div class="title">
      <span class="logo">ğŸ§</span>
      <div>
        <div class="appname">Penguin Companion</div>
        <div id="metaLine" class="meta">Level <span id="lvl">1</span> â€¢ XP <span id="xp">0.0</span> â€¢ Coins <span id="coins">0</span></div>
      </div>
    </div>

    <div class="actions">
      <button id="raceBtn" class="btn ghost">ğŸ Race</button>
      <button id="exportBtn" class="btn ghost">Export JSON</button>
      <label class="file">
        <input id="importFile" type="file" accept="application/json" />
        <span class="btn ghost">Import</span>
      </label>
      <button id="openSettings" class="btn ghost">âš™ï¸ Settings</button>
    </div>
  </header>

  <!-- Grid -->
  <main class="grid">
    <!-- To-Do -->
    <section class="card">
      <h3>âœ… To-Do List</h3>
      <div class="row">
        <input id="taskName" class="input flex" placeholder="New task" />
        <select id="taskCat" class="input w-110"></select>
        <input id="taskXP" class="input w-90" type="number" min="0" step="0.25" placeholder="XP" />
        <button id="addTask" class="btn primary">Add</button>
      </div>
      <ul id="taskList" class="list"></ul>
    </section>

    <!-- Pomodoro & Calls -->
    <section class="card">
      <h3>ğŸ… Pomodoro & ğŸ“ Calls</h3>
      <div class="row g8">
        <button data-call="Call" class="btn" id="callBtn">ğŸ¥ Call Penguin</button>
        <button data-mode="Study" class="btn ghost">Study</button>
        <button data-mode="Exercise" class="btn ghost">Exercise</button>
        <button data-mode="Eat" class="btn ghost">Eat</button>
        <button data-mode="Bath" class="btn ghost">Bath</button>
        <button data-mode="Sleep" class="btn ghost">Sleep</button>
        <button id="openMeet" class="btn purple">ğŸŸ£ Create Meet</button>
      </div>
      <p class="muted">Ambient Lab is muted by default. Toggle & volume in overlays.</p>
    </section>

    <!-- Avatar -->
    <section class="card">
      <h3>ğŸ§ My Penguin</h3>
      <!-- Avatar Builder (3D style) -->
      <div id="avatarPreview" class="avatar-builder">
        <div id="penguin" class="penguin" aria-label="penguin">
          <div class="p-body"></div>
          <div class="p-wing left"></div>
          <div class="p-wing right"></div>
          <div class="p-eye left"></div>
          <div class="p-eye right"></div>
          <div class="p-beak"></div>
        </div>
        <div class="col">
          <div class="big">Hi, Iâ€™m <span id="avName">Pingu</span>!</div>
          <div class="muted">Iâ€™ll cheer you on in popups & calls.</div>
          <input id="nameInput" class="input" placeholder="Penguin name" />
          <div class="chips">
            <button class="chip" data-color="#1DA1F2">Blue</button>
            <button class="chip" data-color="#EF4444">Red</button>
            <button class="chip" data-color="#22C55E">Green</button>
            <button class="chip" data-color="#A855F7">Purple</button>
            <button class="chip" data-color="#F59E0B">Gold</button>
          </div>
          <div class="row g8">
            <label class="select">
              Head:
              <select id="headAcc" class="input">
                <option value="">none</option>
                <option value="beanie">Beanie</option>
                <option value="glasses">Glasses</option>
                <option value="crown">Crown</option>
                <option value="headphones">Headphones</option>
              </select>
            </label>
            <label class="select">
              Body:
              <select id="bodyAcc" class="input">
                <option value="">none</option>
                <option value="scarf">Scarf</option>
                <option value="cape">Cape</option>
                <option value="backpack">Backpack</option>
              </select>
            </label>
            <label class="select">
              Effect:
              <select id="effectAcc" class="input">
                <option value="">none</option>
                <option value="aura">Aura</option>
                <option value="snow">Frost</option>
                <option value="shadow">Shadow</option>
              </select>
            </label>
          </div>
          <button id="saveAvatar" class="btn primary">Save Avatar</button>
        </div>
      </div>
    </section>

    <!-- Stats -->
    <section class="card">
      <h3>ğŸ“Š Category Stats</h3>
      <div id="stats"></div>
    </section>

    <!-- Time-Blocking -->
    <section class="card">
      <h3>ğŸ—“ï¸ Time-Blocking (15-min)</h3>
      <div class="row">
        <input id="tbTitle" class="input flex" placeholder="Block title" />
        <input id="tbFrom" class="input w-120" type="time" value="08:00" />
        <input id="tbTo" class="input w-120" type="time" value="09:00" />
        <button id="addBlock" class="btn primary">Add</button>
        <button id="clearTB" class="btn danger ghost">Clear Schedule</button>
      </div>
      <div id="timeline" class="timeline"></div>
      <div class="row"><button id="clearTBHistory" class="btn ghost">ğŸ—‘ï¸ Clear Todayâ€™s History</button></div>
    </section>

    <!-- Shop -->
    <section class="card">
      <h3>ğŸ›ï¸ Shop</h3>
      <div class="muted">Coins: <span id="coinCount">0</span></div>
      <div id="shop" class="shop"></div>
    </section>

    <!-- Alarms -->
    <section class="card">
      <h3>â° Alarms</h3>
      <div class="row">
        <input id="alarmTime" class="input w-140" type="time" />
        <input id="alarmLabel" class="input flex" placeholder="Go to class" />
        <select id="alarmSound" class="input w-160">
          <option>Penguin Beep-Boo</option>
          <option>Soft Bell</option>
          <option>Retro Ping</option>
        </select>
        <button id="addAlarm" class="btn primary">Add</button>
      </div>
      <ul id="alarms" class="list"></ul>
    </section>

    <!-- Daily Challenges -->
    <section class="card">
      <h3>ğŸ¯ Daily Challenges</h3>
      <ul id="challenges" class="list"></ul>
    </section>
  </main>

  <!-- Pomodoro Overlay -->
  <div id="pomo" class="overlay">
    <div class="pomo-card">
      <div class="overlay-head">
        <div class="row">
          <div class="mini-penguin" id="pomoPenguin"></div>
          <div>
            <div class="big" id="pomoTitle">Focus</div>
            <div class="muted" id="pomoSub">Letâ€™s crush it!</div>
          </div>
        </div>
        <div class="row g8">
          <label class="switch"><input id="ambienceToggle" type="checkbox"><span>Ambient</span></label>
          <input id="ambienceVol" type="range" min="0" max="1" step="0.05" value="0.5" />
          <button id="minBtn" class="btn ghost">Minimize</button>
          <button id="closePomo" class="btn danger ghost">Close</button>
        </div>
      </div>

      <div id="pomoScene" class="scene study">
        <canvas id="pomoAnim" width="560" height="260" aria-hidden="true"></canvas>
      </div>

      <div class="timer">
        <div id="timerText" class="bigtimer">25:00</div>
        <div class="row g8">
          <button id="pauseBtn" class="btn">â¸ï¸ Pause</button>
          <button id="doneBtn" class="btn success">âœ… Done</button>
        </div>
      </div>
      <p class="muted center">Tip: Open Pomodoro separately if you want both running.</p>
    </div>
  </div>

  <!-- Floating Call -->
  <div id="call" class="call">
    <div class="call-head">
      <div class="row"><div class="tiny-penguin" id="callPenguin"></div><b id="callLabel">Penguin Call</b></div>
      <div class="row g8"><button id="restoreCall" class="btn ghost">â›¶</button><button id="closeCall" class="btn danger ghost">âœ–</button></div>
    </div>
    <div id="callScene" class="call-scene study"></div>
    <div class="muted center" id="callHint">Studying with youâ€¦</div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast">
    <div class="tiny-penguin" id="toastPenguin"></div>
    <div><b id="toastTitle">Pingu</b><div id="toastMsg" class="muted">Nice job!</div></div>
  </div>

  <!-- Settings -->
  <div id="settings" class="modal" aria-hidden="true">
    <div class="modal-card w-520">
      <div class="row between">
        <h3>âš™ï¸ Settings</h3>
        <button id="closeSettings" class="btn ghost">âœ–</button>
      </div>
      <div class="stack">
        <div class="row">
          <label class="select">Default Theme
            <select id="themeSelect" class="input">
              <option value="tech">Tech Lab</option>
              <option value="arctic">Arctic Base</option>
              <option value="sunset">Sunset Beach</option>
              <option value="midnight">Midnight</option>
            </select>
          </label>
        </div>
        <div class="row g16 wrap">
          <label>Focus (min) <input id="setFocus" class="input w-90" type="number" min="1" value="25" /></label>
          <label>Short Break (min) <input id="setBreak" class="input w-90" type="number" min="1" value="5" /></label>
          <label>Auto-start next phase <input id="autoNext" type="checkbox" /></label>
        </div>
        <div class="row g8">
          <button id="recalcBtn" class="btn ghost">Recalculate XP & Coins</button>
          <button id="resetTodayBtn" class="btn ghost">Reset Today Only</button>
          <button id="wipeBtn" class="btn danger">Clear All Data</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Race Environment -->
  <div id="race" class="overlay">
    <div class="race-card">
      <div class="row between">
        <h3>ğŸ Penguin Race</h3>
        <button id="exitRace" class="btn ghost">âœ–</button>
      </div>
      <div id="raceStage" class="stack center">
        <!-- filled by JS -->
      </div>
    </div>
  </div>

  <!-- Sounds -->
  <audio id="bell" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg"></audio>
  <audio id="ambient" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5ba8bf9a7e.mp3?filename=ambient-110253.mp3" loop></audio>

  <script src="script.js"></script>
</body>
</html>

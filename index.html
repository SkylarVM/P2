<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Penguin Companion — XP Planner</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>

<header id="appHeader">
  <div class="brand">
    <span>🐧</span>
    <h1>Penguin Companion — XP Planner</h1>
  </div>
  <div class="level-strip">
    <div class="level-line">
      <span id="levelLabel">Level 1</span>
      <span id="xpLabel">• XP 0</span>
      <span id="coinLabel">• Coins 0</span>
    </div>
    <div class="progress"><div id="xpProgress" class="progress-bar" style="width:0%"></div></div>
  </div>
  <div class="header-actions">
    <button class="btn ghost" id="exportJson">Export JSON</button>
    <button class="btn ghost" id="exportCsv">Export CSV</button>
    <label class="btn ghost" for="importFile">Import<input type="file" id="importFile" accept=".json,.csv" hidden></label>
    <button class="btn ghost" id="btnRace">🏁 Race</button>
    <button id="settingsBtn" class="btn ghost">⚙️</button>
  </div>
</header>

<main id="grid">

  <section class="card">
    <h2>✅ To-Do List</h2>
    <div class="row">
      <input id="taskName" class="input" placeholder="New task..." />
      <input id="taskXp" class="input input-s" placeholder="XP" type="number" />
    </div>
    <div class="row">
      <select id="taskCategory" class="select"><option>Study</option></select>
      <button class="btn ghost" id="addCategory">+ Add Category</button>
      <button class="btn primary" id="addTask">Add Task</button>
    </div>
    <ul id="taskList" class="list"></ul>
  </section>

  <section class="card">
    <h2>🎁 Reward Store</h2>
    <div class="row">
      <input id="rewardName" class="input" placeholder="New reward..." />
      <input id="rewardCost" class="input input-s" placeholder="Cost XP" type="number" />
      <button class="btn primary" id="addReward">Add</button>
    </div>
    <ul id="rewardList" class="list"></ul>
  </section>

  <section class="card">
    <h2>📅 History (Today)</h2>
    <div id="historySummary" class="small muted">Total: 0 Pomodoros • 0 XP earned</div>
    <ul id="historyList" class="list"></ul>
  </section>

  <section class="card">
    <h2>📊 Category Stats</h2>
    <div id="statsBars"></div>
  </section>

  <section class="card">
    <h2>⏱️ Pomodoro & 📞 Calls</h2>
    <div class="row gap wrap">
      <label>Focus <input id="focusMinutes" class="input input-s" type="number" value="25"></label>
      <label>Short <input id="breakMinutes" class="input input-s" type="number" value="5"></label>
      <label>Long <input id="longMinutes" class="input input-s" type="number" value="15"></label>
      <button class="btn primary" id="savePomodoro">Save</button>
    </div>
    <div class="btn-row">
      <button class="btn primary" id="callPenguinBtn">🐧 Call Penguin</button>
      <button class="btn ghost" data-mode="Study">Study</button>
      <button class="btn ghost" data-mode="Exercise">Exercise</button>
      <button class="btn ghost" data-mode="Eat">Eat</button>
      <button class="btn ghost" data-mode="Bath">Bath</button>
      <button class="btn ghost" data-mode="Sleep">Sleep</button>
      <button class="btn success" id="openPomodoro">🍅 Open Pomodoro</button>
    </div>
    <button class="btn ghost" id="shareCall">🟡 Share call (Meet)</button>
    <div class="hint">Ambient Lab hum is muted by default. Toggle & volume available in full-screen overlays.</div>
  </section>

  <section class="card">
    <h2>🧮 & 🔍 Tools</h2>
    <div class="row gap">
      <button class="btn primary" id="btnOpenCalc">Open Calculator</button>
      <button class="btn primary" id="btnOpenSearch">Open Quick Search</button>
    </div>
    <div class="hint">Both open as pop-ups so you can keep working.</div>
  </section>

  <section class="card">
    <h2>⏰ Alarms</h2>
    <div class="row gap wrap">
      <input id="alarmTime" type="time" class="input input-s">
      <input id="alarmLabel" class="input" placeholder="Go to class">
      <select id="alarmSound" class="select"><option>Penguin Beep-Boo</option></select>
      <button id="addAlarm" class="btn primary">Add</button>
    </div>
    <ul id="alarmList" class="list"></ul>
  </section>

  <section class="card wide">
    <h2>🗓️ Time-Blocking (15-min)</h2>
    <div class="row gap wrap">
      <input id="blockTitle" class="input" placeholder="Block title">
      <input id="blockStart" class="input input-s" type="time" value="08:00">
      <input id="blockEnd" class="input input-s" type="time" value="09:00">
      <button id="addBlock" class="btn primary">Add</button>
      <button id="clearSchedule" class="btn danger">Clear Schedule</button>
      <button id="clearHistory" class="btn ghost">Clear Today's History</button>
    </div>
    <div id="dayGrid" class="day-grid">
      <div id="nowMarker" class="now-marker"></div>
    </div>
  </section>

  <!-- Avatar Section with full Penguin Builder -->
  <section class="card" id="cardAvatar">
    <h2>🐧 My Penguin</h2>
    <div id="avatarPreview">
      <div id="penguinPreview" class="penguin">
        <div class="body"></div>
        <div class="wing left"></div>
        <div class="wing right"></div>
        <div class="eye left"></div>
        <div class="eye right"></div>
        <div class="beak"></div>
      </div>
      <div>
        <div>Hi, I’m <span id="avatarName">Pingu</span>!</div>
        <div class="small">I’ll cheer you on in popups & calls.</div>
      </div>
    </div>
    <div class="row mt">
      <input id="nameInput" class="input" value="Pingu">
    </div>
    <div class="row mt">
      <div class="swatch" data-color="blue"></div>
      <div class="swatch" data-color="red"></div>
      <div class="swatch" data-color="green"></div>
      <div class="swatch" data-color="purple"></div>
      <div class="swatch" data-color="gold"></div>
    </div>
    <div class="row mt">
      <select id="headAccessory" class="select"><option>Head: none</option></select>
      <select id="bodyAccessory" class="select"><option>Body: none</option></select>
    </div>
    <div class="row mt">
      <select id="effectSelect" class="select"><option>Effect: none</option></select>
    </div>
    <button id="saveAvatar" class="btn primary mt">Save Avatar</button>
  </section>

  <section class="card">
    <h2>🏪 Penguin Shop</h2>
    <div class="small muted">Coins: <span id="coinCount">0</span> • Owned accessories: <span id="ownedCount">0</span></div>
    <div class="shop-columns">
      <div><h4>Accessories</h4><div id="shopAccessories" class="shop-grid"></div></div>
      <div><h4>Themes</h4><div id="shopThemes" class="shop-grid"></div></div>
      <div><h4>Effects</h4><div id="shopEffects" class="shop-grid"></div></div>
    </div>
  </section>

</main>

<!-- Overlays -->
<div id="pomodoroOverlay" class="overlay hidden">
  <div class="overlay-inner">
    <div class="overlay-head">Pomodoro <button class="btn ghost" id="closePomodoro">✖</button></div>
    <div class="overlay-body center">
      <div class="big-timer" id="pomTimer">25:00</div>
      <div class="row gap center">
        <button id="startPomodoro" class="btn primary">Start</button>
        <button id="pausePomodoro" class="btn ghost">Pause</button>
        <button id="donePomodoro" class="btn success">Done</button>
      </div>
    </div>
  </div>
</div>

<div id="callOverlay" class="overlay hidden">
  <div class="overlay-inner wide">
    <div class="overlay-head">Penguin Call
      <div class="row gap">
        <button class="btn ghost" id="minimizeCall">Minimize</button>
        <button class="btn danger" id="closeCall">Close</button>
      </div>
    </div>
    <div id="callStage" class="overlay-body center"></div>
  </div>
</div>

<div id="miniCallBubble" class="mini-bubble hidden">
  <div class="mini-head"><span>🐧 Pingu Call</span><button class="btn ghost" id="restoreCall">⛶</button></div>
  <div class="mini-body">
    <div class="mini-penguin"></div>
    <div id="miniPomodoroTick" class="tiny muted">00:00</div>
  </div>
</div>

<!-- Race Modal -->
<div id="raceLobby" class="modal hidden">
  <div class="modal-inner">
    <div class="modal-head">🏁 Penguin Race Lobby <button class="btn ghost" id="closeRace">✖</button></div>
    <div class="modal-body">
      <div class="race-body">
        <div class="race-col">
          <button id="createRace" class="btn primary">Create Race</button>
          <div class="race-code">Your Code: <span id="raceCode">—</span></div>
          <input id="joinCode" class="input" placeholder="Enter code to join">
          <button id="joinRace" class="btn success">Join Race</button>
        </div>
        <div class="race-col">
          <h4>Participants</h4>
          <ul id="raceParticipants"></ul>
          <button id="startRace" class="btn primary">Start Race</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="raceArena" class="overlay hidden">
  <div class="overlay-inner wide">
    <div class="overlay-head">
      <span id="raceRoomTag">Race Room</span>
      <button class="btn ghost" id="leaveRace">Leave</button>
    </div>
    <div class="overlay-body center">
      <div class="big-timer" id="raceTimer">25:00</div>
      <button class="btn primary" id="startRacePom">Start</button>
      <div id="miniGameArea" class="minigame hidden"></div>
      <ul id="racePlayerList"></ul>
    </div>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
